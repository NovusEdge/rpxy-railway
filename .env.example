# rpxy Railway Template - Environment Variables
# Copy this file to .env and configure your values

# REQUIRED CONFIGURATION
# The backend service URL to proxy requests to
UPSTREAM_URL=your-app.railway.internal:3000

# BASIC CONFIGURATION
# Port for HTTP traffic (Railway sets this automatically)
PORT=8080

# Port for HTTPS/TLS traffic
TLS_PORT=8443

# Server name to match incoming requests (* matches all domains)
SERVER_NAME=*

# Load balancing strategy: round_robin or random
LOAD_BALANCE=round_robin

# Logging level: error, warn, info, debug, trace
LOG_LEVEL=info

# HEALTH CHECKS
# Path for rpxy's health check endpoint
HEALTH_CHECK_PATH=/health

# Health check path on upstream services
UPSTREAM_HEALTH_CHECK=/health

# Health check timeout in seconds
HEALTH_CHECK_TIMEOUT=10

# PATH-BASED ROUTING (OPTIONAL)
# Route specific paths to different upstreams
# API_PATH=/api
# API_UPSTREAM_URL=api-service.railway.internal:8080
# API_LOAD_BALANCE=round_robin

# MULTI-DOMAIN SUPPORT (OPTIONAL)
# Additional server name for custom domain routing
# CUSTOM_SERVER_NAME=api.example.com
# CUSTOM_UPSTREAM_URL=api-backend.railway.internal:4000
# CUSTOM_LOAD_BALANCE=round_robin

# PERFORMANCE TUNING
# Number of worker threads (0 = auto-detect based on CPU cores)
WORKER_THREADS=0

# Maximum concurrent client connections
MAX_CLIENTS=512

# TCP listen backlog size
TCP_LISTEN_BACKLOG=1024

# TLS CONFIGURATION (OPTIONAL)
# Custom TLS certificate and key paths
# TLS_CERT_PATH=/path/to/cert.pem
# TLS_KEY_PATH=/path/to/key.pem

# EXPERIMENTAL FEATURES
# Enable HTTP/3 support (true/false)
ENABLE_HTTP3=false

# ACME/LET'S ENCRYPT CONFIGURATION (OPTIONAL)
# Email for Let's Encrypt certificate registration
# ACME_EMAIL=admin@example.com

# ACME directory URL (default: Let's Encrypt production)
# ACME_DIR_URL=https://acme-v02.api.letsencrypt.org/directory

# Use Let's Encrypt staging environment (true/false)
# ACME_STAGING=false

# EXAMPLE CONFIGURATIONS:

# Simple proxy setup:
# UPSTREAM_URL=myapp.railway.internal:3000
# SERVER_NAME=myapp.example.com

# API Gateway with path routing:
# UPSTREAM_URL=frontend.railway.internal:3000
# API_PATH=/api
# API_UPSTREAM_URL=backend.railway.internal:8080
# SERVER_NAME=myapp.example.com

# High-performance setup:
# UPSTREAM_URL=app1.railway.internal:3000,app2.railway.internal:3000
# LOAD_BALANCE=round_robin
# WORKER_THREADS=4
# MAX_CLIENTS=1024
# LOG_LEVEL=warn

# HTTPS with Let's Encrypt:
# UPSTREAM_URL=myapp.railway.internal:3000
# SERVER_NAME=secure.example.com
# ACME_EMAIL=admin@example.com
# ACME_STAGING=false